import{d as i,j as e,c as t,k as B,l as k,m as P,n as I,s as D}from"./index-C0dVWJZn.js";import{z as x,u as R,F as A,a as h,b as u,c as f,e as g,I as w,f as p,t as U}from"./zod-Dgx5S-VR.js";import{B as N}from"./button-C-yvXE_o.js";import{B as L}from"./badge-C2WiDZ-w.js";const v=i.forwardRef(({className:s,...r},n)=>e.jsx("div",{ref:n,className:t("rounded-xl border border-border bg-card text-card-foreground shadow",s),...r}));v.displayName="Card";const b=i.forwardRef(({className:s,...r},n)=>e.jsx("div",{ref:n,className:t("flex flex-col space-y-1.5 p-6",s),...r}));b.displayName="CardHeader";const S=i.forwardRef(({className:s,...r},n)=>e.jsx("div",{ref:n,className:t("font-semibold leading-none tracking-tight",s),...r}));S.displayName="CardTitle";const C=i.forwardRef(({className:s,...r},n)=>e.jsx("div",{ref:n,className:t("text-sm text-muted-foreground",s),...r}));C.displayName="CardDescription";const E=i.forwardRef(({className:s,...r},n)=>e.jsx("div",{ref:n,className:t("p-6 pt-0",s),...r}));E.displayName="CardContent";const F=i.forwardRef(({className:s,...r},n)=>e.jsx("div",{ref:n,className:t("flex items-center p-6 pt-0",s),...r}));F.displayName="CardFooter";const H=x.object({email:x.string().email("form/invalid-email"),password:x.string().min(1,"form/password-required")}),M=x.object({username:x.string().min(4,"form/username-too-short").max(30,"form/username-too-long"),email:x.string().email("form/invalid-email"),password:x.string().min(6,"form/password-too-short").max(30,"form/password-too-long"),confirmPassword:x.string()}).refine(({password:s,confirmPassword:r})=>s==r&&r,{message:"form/password-mismatch",path:["confirmPassword"]}),V=async(s,r)=>await B(k,s,r),W=()=>{const[s,r]=i.useState(!1),[n,o]=i.useState("");return{signUp:async(c,j,a,l)=>{var m,d;r(!0),o("");try{const y=await V(j,a);(m=l==null?void 0:l.onSuccess)==null||m.call(l,y)}catch(y){(d=l==null?void 0:l.onError)==null||d.call(l,y),r(!1),o(y.code)}},loading:s,error:n}},q=({onSwitchToSignIn:s})=>{const{signUp:r,loading:n}=W(),o=P(),c=R({resolver:U(M),defaultValues:{username:"",email:"",password:"",confirmPassword:""}}),j=async a=>{const{email:l,password:m}=a;await r("hello",l,m,{onSuccess:()=>{o("/groups")},onError:d=>{c.setError("confirmPassword",{message:d.code})}})};return e.jsxs(v,{className:"w-96",children:[e.jsxs(b,{children:[e.jsx(S,{children:"Sign up"}),e.jsx(C,{children:"Create an account."})]}),e.jsx(E,{children:e.jsx(A,{...c,children:e.jsxs("form",{className:"space-y-4",onSubmit:c.handleSubmit(j),children:[e.jsx(h,{name:"username",control:c.control,render:({field:a})=>e.jsxs(u,{children:[e.jsx(f,{children:"Username"}),e.jsx(g,{children:e.jsx(w,{...a,placeholder:"John Doe"})}),e.jsx(p,{})]})}),e.jsx(h,{name:"email",control:c.control,render:({field:a})=>e.jsxs(u,{children:[e.jsx(f,{children:"Email"}),e.jsx(g,{children:e.jsx(w,{...a,placeholder:"johndoe@gmail.com"})}),e.jsx(p,{})]})}),e.jsx(h,{name:"password",control:c.control,render:({field:a})=>e.jsxs(u,{children:[e.jsx(f,{children:"Password"}),e.jsx(g,{children:e.jsx(w,{...a,placeholder:"Enter your password...",type:"password"})}),e.jsx(p,{})]})}),e.jsx(h,{name:"confirmPassword",control:c.control,render:({field:a})=>e.jsxs(u,{children:[e.jsx(f,{children:"Confirm password"}),e.jsx(g,{children:e.jsx(w,{...a,placeholder:"Enter your password...",type:"password"})}),e.jsx(p,{})]})}),e.jsxs(N,{className:"w-full",disabled:n,children:[n&&e.jsx(I,{className:"animate-spin"}),"Sign up"]})]})})}),e.jsx(F,{children:e.jsx(N,{variant:"link",className:"w-full",onClick:()=>s==null?void 0:s(),children:"Already have an account? Sign in!"})})]})},z=async(s,r)=>await D(k,s,r),J=()=>{const[s,r]=i.useState(!1),[n,o]=i.useState("");return{signIn:async(c,j,a)=>{var l,m;r(!0),o("");try{const d=await z(c,j);(l=a==null?void 0:a.onSuccess)==null||l.call(a,d)}catch(d){(m=a==null?void 0:a.onError)==null||m.call(a,d),r(!1),o(d.code)}},loading:s,error:n}},G=({onSwitchToSignUp:s})=>{const{signIn:r,loading:n}=J(),o=P(),c=R({resolver:U(H),defaultValues:{email:"",password:""}}),j=async a=>{const{email:l,password:m}=a;await r(l,m,{onSuccess:()=>{o("/groups")},onError:d=>{c.setError("password",{message:d.code})}})};return e.jsxs(v,{className:"w-96",children:[e.jsxs(b,{children:[e.jsx(S,{children:"Sign in"}),e.jsx(C,{children:"Sign into your account."})]}),e.jsx(E,{children:e.jsx(A,{...c,children:e.jsxs("form",{className:"space-y-4",onSubmit:c.handleSubmit(j),children:[e.jsx(h,{name:"email",render:({field:a})=>e.jsxs(u,{children:[e.jsx(f,{children:"Email"}),e.jsx(g,{children:e.jsx(w,{...a,placeholder:"johndoe@gmail.com"})}),e.jsx(p,{})]})}),e.jsx(h,{name:"password",render:({field:a})=>e.jsxs(u,{children:[e.jsx(f,{children:"Password"}),e.jsx(g,{children:e.jsx(w,{type:"password",placeholder:"Enter your password...",...a})}),e.jsx(p,{})]})}),e.jsxs(N,{type:"submit",className:"w-full",disabled:n,children:[n&&e.jsx(I,{className:"animate-spin"}),"Sign in"]})]})})}),e.jsx(F,{children:e.jsx(N,{variant:"link",className:"w-full",onClick:()=>s==null?void 0:s(),children:"Don't have an account? Sign up!"})})]})},Y=({initial:s})=>{const[r,n]=i.useState(s);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 place-content-center",children:[e.jsx("div",{className:t("flex justify-center items-center","h-screen"),children:e.jsx(q,{onSwitchToSignIn:()=>{n("signin"),history.replaceState(null,"","/signin")}})}),e.jsx("div",{className:t("flex justify-center items-center","h-screen"),children:e.jsx(G,{onSwitchToSignUp:()=>{n("signup"),history.replaceState(null,"","/signup")}})})]}),e.jsx("div",{className:t("fixed top-0 h-screen w-full","bg-foreground text-background","transition-all duration-500 ease-in-out",r=="signin"?"-left-1/2 pl-[50vw]":"left-1/2 pr-[50vw]"),children:e.jsxs("div",{className:t("flex flex-col justify-center items-center","w-[50vw] h-full px-4 py-2"),children:[e.jsxs("div",{className:t("flex items-center gap-2"),children:[e.jsx("h1",{className:"text-2xl font-bold",children:"synergy"}),e.jsx(L,{variant:"secondary",className:"h-fit",children:"v0.1"})]}),e.jsx("span",{className:"text-sm",children:"Teamwork made simple."})]})})]})};export{Y as A};
